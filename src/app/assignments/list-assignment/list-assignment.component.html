<app-header></app-header>

  <!-- [ Main Content ] start -->
  <div class="pcoded-main-container">
    <div class="pcoded-wrapper">
        <div class="pcoded-content">
            <div class="pcoded-inner-content">
                <div class="main-body">
                    <div class="page-wrapper">

                        <!-- [ Main Content ] start -->
                        <div class="row">
                          <div class="col-md-1"></div>
                          <div class="col-md-10">
                            
                            <!--
                              La ligne suivante permet d'afficher le composant qui correspond à l'URL (en fonction des routes)
                            -->
                            <main class="container">
                              <div>
                                <div class="col-xl-12 col-md-12">
                                    <div class="row">
                                        <div class="col-md-4">
                                            <a class="home btn btn-danger mb-4" routerLink="/home"><i class="fas fa-home"></i>Accueil</a>
                                        </div>
                                        <div class="col-md-4">
                                        </div>
                                        <div class="col-md-4">
                                            <a routerLink="/add">
                                                <button class="btn btn-primary mb-4" ><i class="fas fa-plus"></i>Ajouter un assignment</button>
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            
                                <div class="col-xl-12 col-md-12">
                                    <div class="card table-card">
                                        <div class="card-header">
                                            <h5>Liste des assignments</h5>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-6"></div>
                                            <div class="col-md-6">
                                                <label>Nombre d'assignments par page :&nbsp;&nbsp;</label>
                                                <input type="range" min=5 max="100"  [(ngModel)]="limit" (change)="getAssignments()"> 
                                                {{limit}}
                                            </div>
                                        </div>
                                        <div class="card-body px-0 py-0 text-center">
                                            <div class="table-responsive">
                                                <div class="session-scroll" style="height:478px;position:relative;">
                                                    <table class="table table-hover m-b-0" id="DataTable">
                                                        <thead>
                                                            <tr>
                                                                <th><span>#</span></th>
                                                                <th>Nom</th>
                                                                <th>Rôle</th>
                                                                <th>Rendu</th>
                                                                <th><span>Action</span></th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                                <tr *ngFor="let assignment of assignments; let i=index">
                                                                    <td>{{assignment.id}}</td>
                                                                    <td>{{assignment.nom}}</td>
                                                                    <td>{{assignment.dateDeRendu | date}}</td>
                                                                    <td [ngStyle]="{'color': assignment.rendu ? 'green' : 'red'}">{{assignment.rendu}}</td>
                                                                    <td>
                                                                        <a routerLink="/assignment/{{assignment.id}}"><button class="btn btn-primary mb-4"><i class="fas fa-info-circle"></i>Voir</button></a>
                                                                        <a routerLink="/assignment/{{assignment.id}}/edit"><button class="btn btn-info mb-4" [disabled]="!isAdmin()"><i class="fas fa-edit"></i>Editer</button></a>
                                                                    </td>
                                                                </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                              <div class="pagination pagination-sm justify-content-end">
                                <p>{{(page -1) * limit + 1}} - {{page * limit}} sur {{totalDocs}}&nbsp;&nbsp;&nbsp;&nbsp;</p>
                                <button mat-stroked-button color="basic" (click)="premierePage()" [disabled]="page===1"><span>I<</span></button>
                                <button mat-stroked-button color="basic" (click)="pagePrecedente()" [disabled]="!hasPrevPage"><</button>
                                <button mat-raised-button color="primary" (click)="pagePrecedente()">{{page}}</button>
                                <button mat-stroked-button color="basic" (click)="pageSuivante()" [disabled]="!hasNextPage">></button>
                                <button mat-stroked-button color="basic" (click)="dernierePage()" [disabled]="page===totalPages"><span>>I</span></button>
                              </div>
                              </main>
                          </div>      
                          <div class="col-md-1"></div>                    
                        </div>
                        <!-- [ Main Content ] end -->
                    </div>
                </div>
            </div>
        </div>
    </div>
  </div>
  <!-- [ Main Content ] end -->




  